<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ajustes perfil</title>
  <link href="css/bootstrap.css" rel="stylesheet">
  <link href="css/estilos-propios.css" rel="stylesheet">
</head>
<body>
  <header>
    <div>
      <div style="margin-top: 10px; margin-left:20px">
        <a href="inicioIncidencias.html">
          <img src="csf-horitzontal-removebg-preview.png" height="40px" weight="40px">
        </a>
      </div>
    </div>
  </header>
  <div class="flex-shrink-0 p-3" id="sidebar">
    <a class="d-flex align-items-center pb-3 mb-3 link-body-emphasis text-decoration-none border-bottom">
      <span class="fs-5 fw-semibold" style="margin-left: 60px"><img src="https://cdn-icons-png.flaticon.com/512/17/17654.png" width="20px" height="20px" style="margin-right: 10px">Barra lateral</span>
    </a>
    <ul class="list-unstyled ps-0">
      <li class="mb-1">
        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#home-collapse" aria-expanded="true" style="margin-left: 60px">
          Incidencias
        </button>
        <div class="collapse show" id="home-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="inicioIncidencias.html" class="link-body-emphasis d-inline-flex text-decoration-none rounded" style="margin-left: 60px">Pendientes</a></li>
            <li><a href="IncidenciasHechas.html" class="link-body-emphasis d-inline-flex text-decoration-none rounded" style="margin-left: 60px">Hechas</a></li>
            <li><a href="IncidenciasElim.html" class="link-body-emphasis d-inline-flex text-decoration-none rounded" style="margin-left: 60px">Eliminadas</a></li>
          </ul>
        </div>
      </li>
      <li class="mb-1">
        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" onclick="location.href='Mensajes.html'" style="margin-left: 60px">
          Mensajes
        </button>
      </li>
      <li class="border-top my-3"></li>
      <li class="mb-1">
        <button class="btn btn-toggle d-inline-flex align-items-center rounded border-0 collapsed" data-bs-toggle="collapse" data-bs-target="#account-collapse" aria-expanded="false" style="margin-left: 60px">
          Ajustes
        </button>
        <div class="collapse" id="account-collapse">
          <ul class="btn-toggle-nav list-unstyled fw-normal pb-1 small">
            <li><a href="Perfil.html" class="link-body-emphasis d-inline-flex text-decoration-none rounded" style="margin-left: 60px">Perfil</a></li>
            <li><a href="index.html" class="link-body-emphasis d-inline-flex text-decoration-none rounded" style="margin-left: 60px">Cerrar sesión</a></li>
          </ul>
        </div>
      </li>
    </ul>
  </div>
  <div id="contenedor-Perfil">
    <div id="margen-foto">
      <img src="perfil-icono.png" width="100px" style="padding-bottom: 20px">
      <a><br></a>
      <a id="nombreUsuario" style="color:gray;">Celia</a>
      <a><br></a>
      <a id="correoUsuario" style="color:gray;">celiarg.clinica@hospital.com</a>
    </div>
    <div id="margen-texto-perfil1">
      <label for="username" id="label-perfil" title="Nombre de usuario:">Nombre de usuario:</label>
      <input type="text" class="form-control" id="username" placeholder="Nombre de usuario..." size="37%">
      <label for="email" id="label-perfil" title="Correo electrónico:">Correo electrónico:</label>
      <input type="email" class="form-control" id="email" placeholder="Correo electronico..." size="37%">
    </div>
    <div id="margen-texto-perfil2">
      <label for="currentPassword" id="label-perfil" title="Contraseña actual (Obligatorio para pasar cualquier cambio):">Contraseña actual (Obligatorio para pasar cualquier cambio):</label>
      <input type="password" class="form-control" id="currentPassword" placeholder="Contraseña actual..." size="37%">
      <label for="newPassword" id="label-perfil" title="Contraseña nueva (opcional si no se quiere cambiar):">Contraseña nueva (opcional si no se quiere cambiar):</label>
      <input type="password" class="form-control" id="newPassword" placeholder="Contraseña nueva..." size="37%">
    </div>
    <div id="boton-perfil">
      <button class="btn btn-primary" type="button" onclick="cambiarDatos()">Cambiar los datos</button>
    </div>
  </div>
  
  <footer>
  </footer>
  <script src="js/bootstrap.bundle.min.js"></script>
  <script>
    function cambiarDatos() {
      const nombre = document.getElementById('username').value;
      const correo = document.getElementById('email').value;
      const contrasenaActual = document.getElementById('currentPassword').value;

      // Validar que los campos no estén vacíos y que se haya ingresado la contraseña
      if (contrasenaActual === '' || (nombre === '' && correo === '')) {
        alert('Por favor, complete todos los campos requeridos y asegúrese de ingresar la contraseña actual.');
        return;
      }

      // Validar que el correo contenga una '@'
      if (correo !== '' && !correo.includes('@')) {
        alert('Por favor, ingrese un correo electrónico válido que contenga "@"');
        return;
      }

      // Actualizar el texto de nombre y correo
      if (nombre !== '') {
        document.getElementById('nombreUsuario').innerText = nombre;
      }
      if (correo !== '') {
        document.getElementById('correoUsuario').innerText = correo;
      }

      alert('Datos actualizados correctamente.');
    }
  </script>
</body>
</html>